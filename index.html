<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>MessageBox API</title>

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="css/monokai-sublime.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand navbar-right hidden-xs" href="https://doc.perinatologie.nl">
                <img src="https://www.perinatologie.nl/assets/img/perinatologie.nl.png" style="width: 40px; float: left; margin-right: 5px;" />
                doc.perinatologie.nl
            </a>
            <a class="navbar-brand" href="./">
                MessageBox API
                <small class="hidden-xs hidden-sm">
                    Implementatie handleiding
                </small>
            </a>
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="active">
                                                                                                                        <a href="./">
                                                                                                                    Inleiding
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="content-types.html">
                                                                                                                    Content types
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="address-formats.html">
                                                                                                                    Adres formaten
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="rest-api.html">
                                                                                                                    REST API
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-get-messages.html">
                                                                                                                    Get message list
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-get-message.html">
                                                                                                                    Get message
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-send.html">
                                                                                                                    Send message
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-send-legacy.html">
                                                                                                                    Send message (legacy)
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-archive-message.html">
                                                                                                                    Archive message
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-unarchive-message.html">
                                                                                                                    Unarchive message
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-properties-add.html">
                                                                                                                    Properties add
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="viewer-api.html">
                                                                                                                    Viewer API
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="ondersteuning.html">
                                                                                                                    Ondersteuning
                                    </a>
                                </li>
                                                    </ul>

                    </nav>

                
                <section id="content" class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                   <h1 id="messagebox-api">MessageBox API</h1>
<p>MessageBox: De universele beveiligde berichten service voor de Zorg</p>
<p>Technische Implementatie Handleiding voor software leveranciers</p>
<h2 id="inleiding">Inleiding</h2>
<p>MessageBox is een universele berichten service voor de zorg.</p>
<p>De dienst is aan te sluiten op gangbare diensten als E.novation Vanad Zorgmail (zorgmail.nl), KPN E-zorg berichten service (ezorg.nl), reguliere e-mail en meer.</p>
<p>Daarnaast biedt MessageBox de mogelijkheid om direct te communiceren tussen aangesloten gebruikers, zonder deze berichten eerst via een externe dienst te routeren.</p>
<p>MessageBox is op 3 manieren te benaderen:</p>
<ul>
<li>Via een <strong>web-interface</strong>, via <a href="https://post.perinatologie.nl">https://post.perinatologie.nl</a></li>
<li>Via de <strong>REST API</strong> (<a href="https://post.perinatologie.nl/api/v1">https://post.perinatologie.nl/api/v1</a>)</li>
<li>Via een de <strong>Viewer API</strong> (<a href="https://post.perinatologie.nl/viewer">https://post.perinatologie.nl/viewer</a>)</li>
</ul>
<p>Wanneer het EPD van de zorgverlener nog geen integratie biedt met MessageBox, dan kan de gebruiker toch al direct aan de slag, simpelweg door in te loggen via de web interface.</p>
<p>MessageBox is ook eenvoudig direct in EPD software te integreren door de leverancier. Hierbij kan gebruik worden gemaakt van de <a href="rest-api.html">REST API</a> (om een overzicht te krijgen van beschikbare berichten), en de <a href="viewer-api.html">Viewer API</a> (om het bericht te tonen, onafhankelijk van het type bericht).</p>
<p>MessageBox ondersteund via de Viewer een breed aanbod aan verschillende (zorg-specifieke) bericht formaten. Zo kunnen bijvoorbeeld de MEDVRI, MEDLAB, MEDSPE e.d. berichten worden getoond (onafhankelijk van hoe deze verzonden worden), maar ook Perinatologie.nl XML resources, of Text, HTML, Markdown berichten, en meer.</p>
<h2 id="onderdeel-van-het-perinatologienl-platform">Onderdeel van het perinatologie.nl platform</h2>
<p>De PeriHub ondersteunt zowel Pull als Push verkeer.</p>
<p>Tbv Push verkeer wordt gebruik gemaakt van de dienst &quot;MessageBox&quot;, onderdeel van perinatologie.nl, en onderdeel van de PeriHub infrastructuur.</p>
<p>Gebruikers en applicaties kunnen gebruik maken van MessageBox mbv dezelfde gebruikersnaam/wachtwoorden en API keys als voor alle andere diensten van Perinatologie.nl</p>
<p>Ook zijn de adressen van de berichten boxen gelijk aan de accountnamen binnen perinatologie.nl</p>
<p>MessageBox is vergelijkbaar met andere (zorg) berichtenboxen zoals Secure Email, Zorgmail, e.d. met een aantal voordelen:</p>
<ul>
<li>Uniforme gebruikersnaam/wachtwoorden en API keys met andere Perinatologie.nl diensten</li>
<li>In basis kostenloos voor alle deelnemende partijen</li>
<li>Mogelijkheid voor versturen van bijlagen zoals PDFs (rodebandkaarten), DICOM beelden e.d.</li>
<li>Communicatie niet alleen tussen zorgverleners, maar ook andere personen en instanties zoals de client zelf, statistiek beheerders, onderzoekers, e.d.</li>
<li>Web-interface met ondersteuning voor de gangbare formaten die binnen het Perinatologie.nl netwerk worden uitgewisseld.</li>
</ul>
<h2 id="beveiliging">Beveiliging</h2>
<p>Voor het gebruik van de web interface is een perinatologie.nl ID benodigd. Deze is aan te maken via <a href="https://www.perinatologie.nl">www.perinatologie.nl</a>, klik vervolgens op “Aanmelden” rechtsboven.</p>
<p>De API is te benaderen vanuit software applicaties mbv een API Key. De API key wordt aangemaakt op naam van een Organisatie, en geeft toegang tot een of meerdere berichtenboxen.</p>
<p>De Viewer is te benaderen mbv JWT. In de meeste gevallen hoeft de leverancier hier niets extras voor te doen, de JWTs worden namelijke uitgegeven door de API en kunnen 1-op-1 worden gebruikt bij het openen van de Viewer.</p>
<h2 id="hoe-werkt-het">Hoe werkt het?</h2>
<p>Het concept is erg eenvoudig: Een verzendende applicatie stuurt via de REST API een uitgaand request naar de MessageBox API o.v.v. content-type en geadresseerde(n).</p>
<p>Een geadresseerde stuurt ook een uitgaand request aan de REST API om nieuwe berichten headers op te vragen. Om de daadwerkelijke bericht inhoud (content) op te halen zijn er twee opties:</p>
<ol>
<li>Stuur een tweede <a href="rest-api.html">REST API</a> request om de ruwe bericht inhoud op te vragen</li>
<li>Open het bericht middels de <a href="viewer-api.html">Viewer API</a> om het bericht altijd zo goed mogelijk te presenteren aan de gebruiker.</li>
</ol>
<p>In deze opzet is al het verkeer uitgaand, wat voor firewalls en andere security maatregelen eenvoudiger te implementeren is.</p>
<h2 id="boxen-adressen-en-toegang">Boxen, adressen en toegang</h2>
<p>Binnen de PeriHub bestaan verschillende account-typen: user, organization en apikey.</p>
<p>De accountName is hierin altijd uniek, en wordt daarom ook gebruikt voor adressering.</p>
<p>Er kunnen per box meerdere accounts worden toegevoegd die toegang krijgen tot de betreffende box.
Toegang kan worden verleend obv user accounts (voor inloggen op de web-viewer bijvoorbeeld) of een of meerdere API keys (tbv integratie in software applicaties).</p>
<p>Het is dus ook mogelijk om voor 1 organisatie of persoon meerdere boxen aan te maken.</p>
                </section>

            </div>
        </main>

        <footer>
            <div class="container-fluid">
                <p class="text-muted">
                    <a href="https://www.perinatologie.nl">perinatologie.nl</a>
                </p>
            </div>

                            <a class="github-link" href="https://github.com/perinatologie/messagebox-doc">
                    <i class="fa fa-github"></i>
                    Dit document is open-source, bijdragen kan via github.
                </a>
            
        </footer>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yastatic.net/highlightjs/8.2/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
