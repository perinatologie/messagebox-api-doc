<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>MessageBox API</title>

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="css/monokai-sublime.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand navbar-right hidden-xs" href="https://doc.perinatologie.nl">
                <img src="https://www.perinatologie.nl/assets/img/perinatologie.nl.png" style="width: 40px; float: left; margin-right: 5px;" />
                doc.perinatologie.nl
            </a>
            <a class="navbar-brand" href="./">
                MessageBox API
                <small class="hidden-xs hidden-sm">
                    Implementatie handleiding
                </small>
            </a>
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="">
                                                                                                                        <a href="./">
                                                                                                                    Inleiding
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="content-types.html">
                                                                                                                    Content types
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="address-formats.html">
                                                                                                                    Adres formaten
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-get-messages.html">
                                                                                                                    Get messages
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-get-message-content.html">
                                                                                                                    Get message content
                                    </a>
                                </li>
                                                            <li class="active">
                                                                                                                        <a href="endpoint-send.html">
                                                                                                                    Send message
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-send-legacy.html">
                                                                                                                    Send message (legacy)
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-archive-message.html">
                                                                                                                    Archive message
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-unarchive-message.html">
                                                                                                                    Unarchive message
                                    </a>
                                </li>
                                                            <li class="">
                                                                                                                        <a href="endpoint-properties-add.html">
                                                                                                                    Properties add
                                    </a>
                                </li>
                                                    </ul>

                    </nav>

                
                <section id="content" class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                   <h2 id="post-boxnamesend">[POST] /{boxName}/send</h2>
<p>Verzend een bericht. In de POST body wordt een enveloppe gestuurd in de volgende JSON structuur:</p>
<pre><code class="language-json">{
  "id": "message1",
  "subject": "Hallo Jill",
  "from": {
    "displayName": "John Johnson",
    "address": "johnjohnson"
  },
  "to": [
      {
        "displayName": "Jill Jackson",
        "address": "jilljackson"
      }
  ],
  "dateTime": "2018-03-28 15:30:54",
  "contentType": "text/plain",
  "content": "Beste Jill,\nDit is een voorbeeld bericht.\nmvg John"
}</code></pre>
<h3 id="veld-toelichting">Veld toelichting:</h3>
<ul>
<li><code>id</code>: Unieke identificatie voor het bericht bij afzender. Wordt niet verwerkt, maar is te gebruiken indien er vragen over een bepaald bericht zijn bij de afzender.</li>
<li><code>subject</code>: dit is de onderwerp regel die in de applicatie van de ontvanger getoond zal worden in de lijst. Betreft het bericht een bepaalde client of dossier, dan is het te adviseren deze in de subject te plaatsen.</li>
<li><code>from</code>: Een bericht heeft maximaal 1 afzender. De afzender heeft een <code>displayName</code> welke in de berichtenlijst getoond wordt, en een <code>address</code>. Lees meer over <a href="address-formats.html">adresen formaten</a>.</li>
<li><code>to</code>: Een bericht heeft minimaal 1, maar mogelijk meerdere ontvangers. Elke ontvangers heeft een <code>displayName</code> welke in de berichtenlijst getoond wordt, en een <code>address</code>. Lees meer over [addressen].</li>
<li><code>contentType</code>: Dit veld geeft middels een standaard mime-type aan welke inhoud er in het <code>content</code> veld is geplaatst. Lees meer over <a href="content-types.html">content types</a>.</li>
<li><code>content</code>: De daadwerkelijke bericht inhoud. Formaat is afhankelijk van het <code>contentType</code> van dit bericht.</li>
</ul>
<h3 id="verwerking">Verwerking</h3>
<p>Een bericht dat wordt ingediend het <code>send</code> endpoint zal in de <code>OUTBOX</code> van de afzender (from address)
worden geplaatst.
Een achtergrond process verwerkt vervolgens periodiek alle berichten in de OUTBOX en verzend deze
op een methode die bepaald wordt op basis van het address formaat (zie ook <a href="addressen">addressen</a>).
Na verzending wordt het betreffende bericht van de <code>OUTBOX</code> naar de <code>SENT</code> box verplaatst.</p>
                </section>

            </div>
        </main>

        <footer>
            <div class="container-fluid">
                <p class="text-muted">
                    <a href="https://www.perinatologie.nl">perinatologie.nl</a>
                </p>
            </div>

                            <a class="github-link" href="https://github.com/perinatologie/messagebox-doc">
                    <i class="fa fa-github"></i>
                    Dit document is open-source, bijdragen kan via github.
                </a>
            
        </footer>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yastatic.net/highlightjs/8.2/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
